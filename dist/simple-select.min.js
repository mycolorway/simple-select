/* simple-select v2.1.0 | (c) Mycolorway Design | MIT License */
!function(t,e){"object"==typeof module&&module.exports?module.exports=e(require("jquery"),require("simple-module")):(t.SimpleSelect=e(t.jQuery,t.SimpleModule),t.simple=t.simple||{},t.simple.select=function(e){return new t.SimpleSelect(e)},t.simple.select.locales=t.SimpleSelect.locales)}(this,function(t,e){var s=function t(e,s,i){function n(l,o){if(!s[l]){if(!e[l]){var p="function"==typeof require&&require;if(!o&&p)return p(l,!0);if(r)return r(l,!0);var a=new Error("Cannot find module '"+l+"'");throw a.code="MODULE_NOT_FOUND",a}var u=s[l]={exports:{}};e[l][0].call(u.exports,function(t){var s=e[l][1][t];return n(s?s:t)},u,u.exports,t,e,s,i)}return s[l].exports}for(var r="function"==typeof require&&require,l=0;l<i.length;l++)n(i[l]);return n}({1:[function(s,i,n){var r,l=function(t,e){function s(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},o={}.hasOwnProperty;r=function(e){function s(){return s.__super__.constructor.apply(this,arguments)}return l(s,e),s.prototype.opts={el:null,url:null,remote:!1,cls:"",onItemRender:t.noop,placeholder:"",allowInput:!1,wordWrap:!1,locales:null},s.locales={loading:"Loading...",noResults:"No results found"},s._tpl={wrapper:'<div class="simple-select">\n  <span class="link-expand">\n    <i class="icon-caret-down"><span>&#9662;</span></i>\n  </span>\n  <span class="link-clear">\n    <i class="icon-delete"><span>&#10005;</span></i>\n  </span>\n  <div class="select-list">\n  </div>\n</div>',item:'<div class="select-item">\n  <a href="javascript:;" class="label"><span></span></a>\n  <span class="hint"></span>\n</div>'},s.prototype._init=function(){var e;if(this.el=t(this.opts.el),!(this.el.length>0))throw new Error("simple select: option el is required");return null!=(e=this.el.data("simpleSelect"))&&e.destroy(),this.locales=t.extend({},Select.locales,this.opts.locales),this._render(),this._bind()},s.prototype._render=function(){return this.el.hide().data("simpleSelect",this),this.wrapper=t(Select._tpl.wrapper).data("simpleSelect",this).addClass(this.opts.cls).insertBefore(this.el),this.opts.wordWrap?(this.wrapper.addClass("word-wrap"),this.input=t('<textarea rows="1">')):this.input=t('<input type="text">'),this.input.addClass("select-result").attr("autocomplete","off").prependTo(this.wrapper),this.list=this.wrapper.find(".select-list"),this._initItems(),this.selectItem(this.el.val()),this.opts.remote&&this.wrapper.addClass("allow-empty"),this.opts.wordWrap?this._autoresizeInput():this._positionList()},s.prototype._initItems=function(){var e,s;return s=function(e){var s;return s=[],e.each(function(e,i){var n,r,l,o;if(n=t(i),o=n.val())return r=n.data(),t.isEmptyObject(r)||(l={},t.each(Object.keys(r),function(t,e){return l["data-"+e]=r[e]}),r=l),s.push([n.text(),o,r])}),s},(e=this.el.find("optgroup")).length>0?(this.items={},e.each(function(e){return function(i,n){var r;return r=t(n),e.items[r.attr("label")]=s(r.find("option"))}}(this))):this.items=s(this.el.find("option")),this._generateList(this.items),this._checkBlankOption()},s.prototype.setItems=function(e){var s;return s=function(e,s){return t.each(s,function(s,i){var n;return n=t("<option>",t.extend({text:i[0],value:i[1]},i.length>2?i[2]:null)),e.append(n)})},this.items=e,this.el.empty(),t.isArray(e)&&e.length>0?s(this.el,e):t.isPlainObject(e)&&!t.isEmptyObject(e)?t.each(e,function(e){return function(i,n){var r;return r=t("<optgroup>",{label:i}),s(r,n),e.el.append(r)}}(this)):this.opts.remote&&this.el.append("<option>"),this._generateList(this.items),this._checkBlankOption()},s.prototype._checkBlankOption=function(){var t;return t=this.el.find('option:not([value]), option[value=""]'),this._allowEmpty=t.length>0,this.wrapper.toggleClass("allow-empty",this._allowEmpty),this._setPlaceholder(t.text())},s.prototype._setPlaceholder=function(t){if(t||(t=this.opts.placeholder),t)return this.input.attr("placeholder",t)},s.prototype._generateList=function(e){var s,i,n;return n=function(e){var s,i;return s=t(Select._tpl.item).data("item",e),s.find(".label span").text(e[0]),s.attr("data-value",e[1]),e.length>2&&(i=e[2]["data-hint"])&&s.find(".hint").text(i),s},this.list.empty(),i=[],t.isPlainObject(e)&&!t.isEmptyObject(e)?t.each(e,function(e){return function(s,r){var l;return l=t('<div class="select-group">'),l.text(s),i.push(l[0]),t.each(r,function(s,r){var l;if(l=n(r),i.push(l[0]),t.isFunction(e.opts.onItemRender))return e.opts.onItemRender.call(e,l,r)})}}(this)):t.isArray(e)&&e.length>0?t.each(e,function(e){return function(s,r){var l;return l=n(r),t.isFunction(e.opts.onItemRender)&&e.opts.onItemRender.call(e,l,r),i.push(l[0])}}(this)):(s=t('<div class="no-results"></div>').text(this.locales.noResults),i.push(s[0])),this.list.append(i)},s.prototype.selectItem=function(e){var s;if(e&&("object"!=typeof e&&(e=this.list.find(".select-item[data-value='"+e+"']")),e.length>0))return s=e.data("item"),this.input.val(s[0]),this.opts.remote?this.list.empty():this._generateList(this.items),this.wrapper.addClass("selected"),this._toggleList(!1),this.el.val(s[1]),this.opts.allowInput&&t(this.opts.allowInput).val(""),this.triggerHandler("select",[s,e]),this._autoresizeInput(),s},s.prototype.setValue=function(t){return this.input.val(t),this._input()},s.prototype._toggleList=function(t){return null==t&&(t=null),null===t&&(t=!this.wrapper.hasClass("expanded")),t?(this.wrapper.addClass("expanded"),this._scrollToItem()):this.wrapper.removeClass("expanded")},s.prototype._scrollToItem=function(t){if(t||(t=this.list.find(".select-item.selected")),t.length>0)return this.list.scrollTop(t.position().top)},s.prototype._bind=function(){return this.wrapper.find(".link-clear").on("mousedown",function(t){return function(e){return t.clear(),!1}}(this)),this.wrapper.find(".link-expand").on("mousedown",function(t){return function(e){return t._toggleList(),t._focused||t.input.focus(),!1}}(this)),this.list.on("mousedown",".select-item",function(e){return function(s){var i;return i=t(s.currentTarget),e.selectItem(i),e.input.blur(),!1}}(this)),this.input.on("keydown.simple-select",function(t){return function(e){return t._keydown(e)}}(this)).on("input.simple-select",function(t){return function(e){return t._inputTimer&&(clearTimeout(t._inputTimer),t._inputTimer=null),t._inputTimer=setTimeout(function(){return t._input(e)},200)}}(this)).on("blur.simple-select",function(t){return function(e){return t._blur(e)}}(this)).on("focus.simple-select",function(t){return function(e){return t._focus(e)}}(this))},s.prototype._validateInput=function(){var e,s;if(!this.wrapper.hasClass("selected"))return(s=t.trim(this.input.val()))?(e=this.list.find(".select-item:contains('"+s+"')"),e.length>0||(e=this.list.find(".select-item:first")),e.length>0?this.selectItem(e):this.opts.allowInput?(this.el.val(""),t(this.opts.allowInput).val(s)):this.setValue("")):(this.el.val(""),this.opts.allowInput?t(this.opts.allowInput).val(""):void 0)},s.prototype._keydown=function(t){var e,s,i;if(40===t.which||38===t.which){if(t.preventDefault(),!this.wrapper.hasClass("expanded")||this.list.hasClass("empty"))return;if(i=this.list.find(".select-item.selected"),!(i.length>0))return void this.list.find(".select-item:first").addClass("selected");38===t.which?(s=i.prevAll(".select-item:first"),s.length&&(i.removeClass("selected"),s.addClass("selected"))):40===t.which&&(e=i.nextAll(".select-item:first"),e.length&&(i.removeClass("selected"),e.addClass("selected")))}else{if(13===t.which)return t.preventDefault(),this.wrapper.hasClass("expanded")?(i=this.list.find(".select-item.selected"),i.length>0?this.selectItem(i):(this._validateInput(),this._toggleList(!1))):this.el.closest("form").submit();if(27===t.which)return t.preventDefault(),this.input.blur();if(8===t.which&&this.wrapper.hasClass("selected"))return t.preventDefault(),this.setValue("")}},s.prototype._input=function(e){var s,i,n;return this._autoresizeInput(),this.wrapper.removeClass("selected"),this.el.val(""),n=t.trim(this.input.val()),this.opts.remote?(this.list.empty(),this.el.empty().append("<option>"),n?(t('<div class="loading"></div>').text(this.locales.loading).appendTo(this.list),t.ajax({url:this.opts.remote.url,data:t.extend({},this.opts.remote.params,(i={},i[""+this.opts.remote.searchKey]=n,i)),dataType:"json"}).done(function(e){return function(s){return s||(s=[]),t.isArray(s)&&s.length>50&&(s=s.slice(0,50)),e.setItems(s),e.list.find(".select-item:first").addClass("selected"),e._toggleList(!0)}}(this))):this._toggleList(!1)):(this.wrapper.hasClass("expanded")||this._toggleList(!0),s=n?this._filterItems(n):this.items,this._generateList(s),this.list.find(".select-item:first").addClass("selected"))},s.prototype._filterItems=function(e){var s,i,n,r;try{r=new RegExp("(|\\s)"+e,"i")}catch(t){s=t,r=new RegExp("","i")}return i=function(t){var e;return e=t.length>2&&t[2]["data-key"]||t[0],r.test(e)},t.isPlainObject(this.items)?(n={},t.each(this.items,function(e,s){return t.each(s,function(t,s){if(i(s))return n[e]||(n[e]=[]),n[e].push(s)})})):(n=[],t.each(this.items,function(t,e){if(i(e))return n.push(e)})),n},s.prototype._blur=function(t){return this._validateInput(),this._toggleList(!1),this._focused=!1},s.prototype._focus=function(t){if(this._focused=!0,!this.opts.remote||this.input.val()&&!this.wrapper.hasClass("selected"))return this._toggleList(!0)},s.prototype.clear=function(){return this.setValue(""),this._toggleList(!1),this.triggerHandler("clear")},s.prototype._autoresizeInput=function(){var t,e,s;if(this.opts.wordWrap)return this.input.css("height",0),s=parseInt(this.input[0].scrollHeight),e=parseInt(this.input.css("border-top-width")),t=parseInt(this.input.css("border-bottom-width")),this.input.css("height",s+e+t),this._positionList()},s.prototype._positionList=function(){return this.list.css("top",this.input.outerHeight()+2)},s.prototype.disable=function(){return this.input.prop("disabled",!0),this.el.prop("disabled",!0),this.wrapper.addClass("disabled")},s.prototype.enable=function(){return this.input.prop("disabled",!1),this.el.prop("disabled",!1),this.wrapper.removeClass("disabled")},s.prototype.destroy=function(){return this.wrapper.remove(),this.el.removeData("simpleSelect"),this.el.show()},s}(e)},{}]},{},[1]);return s(1)});